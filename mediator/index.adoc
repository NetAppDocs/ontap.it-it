---
permalink: mediator/index.html 
sidebar: sidebar 
keywords: ontap mediator, install requirements, mediator requirements 
summary: 'Per installare ONTAP Mediator, è necessario assicurarsi che tutti i prerequisiti siano soddisfatti, ottenere il pacchetto di installazione ed eseguire il programma di installazione sull"host.' 
---
= Installa o aggiorna ONTAP Mediator
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Per installare o aggiornare ONTAP Mediator, è necessario soddisfare tutti i prerequisiti, scaricare il pacchetto di installazione ed eseguire il programma di installazione sull'host.

* A partire da ONTAP 9,8, è possibile utilizzare qualsiasi versione di ONTAP Mediator per monitorare una relazione di sincronizzazione attiva di SnapMirror.
* È possibile utilizzare qualsiasi versione di ONTAP Mediator per monitorare una configurazione IP MetroCluster .




== Considerazioni sull'installazione e l'aggiornamento

Prima di aggiornare o installare ONTAP Mediator, rivedere questi punti.


NOTE: ONTAP Mediator 1.8 e versioni precedenti non sono compatibili con la modalità FIPS di Red Hat Enterprise Linux (RHEL) e ne impediscono l'installazione corretta.  È possibile verificare se la modalità FIPS è abilitata utilizzando `fips-mode-setup --check` comando.  È possibile disattivare la modalità FIPS utilizzando `fips-modesetup --disable` comando. Riavviare dopo aver disabilitato la modalità FIPS per installare correttamente ONTAP Mediator 1.8 o versioni precedenti.

* Dovresti aggiornare ONTAP Mediator all'ultima versione.  Le versioni precedenti funzionano ancora con tutte le release ONTAP , ma le versioni più recenti includono patch di sicurezza per componenti di terze parti.
* Quando si esegue l'aggiornamento a una nuova versione di ONTAP Mediator, il programma di installazione esegue automaticamente l'aggiornamento alla versione SCST consigliata, a meno che non sia disponibile una versione successiva. Per istruzioni sull'installazione manuale di una versione SCST superiore, vedere link:manage-task.html["Gestione di ONTAP Mediator"]. Per le versioni supportate, vedere link:whats-new-concept.html#scst-support-matrix["Matrice di supporto SCST"].


[NOTE]
====
* Se l'installazione non riesce, potrebbe essere necessario eseguire l'aggiornamento a una versione più recente di ONTAP Mediator.
* Dal 15 giugno 2025 non sarà più possibile installare o aggiornare ONTAP Mediator 1.9 e 1.8 perché i relativi certificati di firma del codice sono scaduti.  Se l'installazione o l'aggiornamento non riesce, utilizzare invece la versione patch ONTAP Mediator 1.9.1.


====
* Se si installa `yum-utils` è possibile utilizzare `needs-restarting` comando.
* A partire da ONTAP Mediator 1.11, IPv6 è supportato per le configurazioni IP MetroCluster .




=== Requisiti dell'host

Attenersi a questi requisiti durante l'installazione di RHEL o Rocky Linux e la configurazione dei repository associati.

[NOTE]
====
Se si modifica il processo di installazione o configurazione, potrebbe essere necessario eseguire ulteriori operazioni.

====
.Requisiti di distribuzione Linux
* Installare RHEL o Rocky Linux secondo le best practice di Red Hat.  Poiché CentOS 8.x ha raggiunto la fine del suo ciclo di vita, non si consigliano versioni compatibili di CentOS 8.x.
* Durante l'installazione di ONTAP Mediator, assicurarsi che il sistema abbia accesso al repository richiesto in modo che il programma di installazione possa recuperare e installare tutte le dipendenze software richieste.
* Per consentire al programma di installazione yum di trovare software dipendente nei repository RHEL, registrare il sistema durante l'installazione o successivamente utilizzando un abbonamento Red Hat valido.
+
[NOTE]
====
Per ulteriori informazioni, consultate la documentazione di Red Hat Subscription Manager.

====


.Requisiti di rete
Assicurarsi che le seguenti porte siano disponibili e inutilizzate per ONTAP Mediator:

|===


| Porta/servizi | Origine | Direzione | Destinazione | Scopo 


 a| 
22/tcp
 a| 
Host di gestione
 a| 
In entrata
 a| 
Mediatore ONTAP
 a| 
(Facoltativo) Gestione SSH / ONTAP Mediator



 a| 
31784/tcp
 a| 
LIF di gestione del cluster
 a| 
In entrata
 a| 
Server web di ONTAP Mediator
 a| 
(OBBLIGATORIO) API REST (HTTPS)



 a| 
3260/tcp ^1^
 a| 
LIF dati nodo o LIF di gestione nodi
 a| 
Bidirezionale
 a| 
Target iSCSI del mediatore ONTAP
 a| 
(Necessario per le configurazioni IP MetroCluster ) Connessione dati iSCSI per le cassette postali

|===
Per i clienti SMBC, ONTAP non richiede l'attivazione o la connessione della porta 3260.

* Se si utilizza un firewall di terze parti, vederelink:https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html#firewall-requirements-for-ontap-mediator["Requisiti del firewall per ONTAP Mediator"^] .
* Per gli host Linux senza accesso a Internet, assicurarsi che i pacchetti richiesti siano disponibili in un repository locale.
+
Se si utilizza il protocollo LACP (link Aggregation Control Protocol) in ambiente Linux, configurare il kernel e impostare `sysctl net.ipv4.conf.all.arp_ignore` su `2`.



.Requisiti del sistema operativo
Il sistema operativo deve soddisfare i seguenti requisiti:

* installazione fisica a 64 bit o macchina virtuale
* 8 GB DI RAM
* 1 GB di spazio su disco (utilizzato per l'installazione delle applicazioni, i log dei server e il database)
* Utente: Accesso root


La tabella seguente mostra i sistemi operativi supportati per ciascuna versione di ONTAP Mediator.

[cols="30,70"]
|===


| Versione del mediatore ONTAP | Versioni Linux supportate 


 a| 
1,11
 a| 
* Red Hat Enterprise Linux
+
** Compatibile: 9.5 ^1^
** Consigliati: 10.1, 10.0, 9.7, 9.6, 9.4 e 8.10


* Rocky Linux 10,1, 9.7 e 8,10
* Oracle Linux 10.0 e 9.6




 a| 
1,10
 a| 
* Red Hat Enterprise Linux
+
** Compatibile: 9.5 ^1^
** Consigliati: 10.0, 9.6, 9.4 e 8,10


* Rocky Linux 10,0, 9.6 e 8,10




 a| 
1.9.1
 a| 
* Red Hat Enterprise Linux
+
** Compatibile: 9.3, 9.1, 8.9, 8.7, 8.6, 8.5 e 8.4 ^1^
** Consigliati: 9.5, 9.4, 9.2, 9.0, 8.10 e 8.8


* Rocky Linux 9.5 e 8.10




 a| 
1,9
 a| 
* Red Hat Enterprise Linux
+
** Compatibile: 9.3, 9.1, 8.9, 8.7, 8.6, 8.5 e 8.4 ^1^
** Consigliati: 9.5, 9.4, 9.2, 9.0, 8.10 e 8.8


* Rocky Linux 9.5 e 8.10




 a| 
1,8
 a| 
* Red Hat Enterprise Linux:
+
** Compatibile: 8.7, 8.6, 8.5 e 8.4 ^1^
** Consigliati: 9.4, 9.3, 9.2, 9.1, 9.0, 8.10, 8.9 e 8.8


* Rocky Linux 9.4 e 8.10




 a| 
1,7
 a| 
* Red Hat Enterprise Linux:
+
** Compatibile: 8.7, 8.6, 8.5 e 8.4 ^1^
** Consigliati: 9.3, 9.2, 9.1, 9.0, 8.9 e 8.8


* Rocky Linux 9.3 e 8.9




 a| 
1.6
 a| 
* Red Hat Enterprise Linux:
+
** Compatibile: 8.7, 8.6, 8.5 e 8.4 ^1^
** Consigliati: 9.2, 9.1, 9.0 e 8,8


* Rocky Linux 9.2 e 8.8




 a| 
1.5
 a| 
* Red Hat Enterprise Linux: 8.5, 8.4, 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1.4
 a| 
* Red Hat Enterprise Linux: 8.5, 8.4, 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1.3
 a| 
* Red Hat Enterprise Linux: 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1.2
 a| 
* Red Hat Enterprise Linux: 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6


|===
. Compatibile significa che Red Hat non supporta più queste versioni di RHEL, ma ONTAP Mediator può ancora essere installato su di esse.


.OS pacchetti richiesti
ONTAP Mediator richiede i seguenti pacchetti:


NOTE: I pacchetti vengono preinstallati o installati automaticamente dal programma di installazione di ONTAP Mediator.

[cols="25,25,25,25"]
|===


| Tutte le versioni RHEL/CentOS | Pacchetti aggiuntivi per RHEL 10.x / Rocky Linux 10 | Pacchetti aggiuntivi per RHEL 9.x / Rocky Linux 9 | Pacchetti aggiuntivi per RHEL 8.x / Rocky Linux 8 


 a| 
* openssl
* openssl-devel
* kernel-devel- (uname -r)
* gcc
* fare
* libselinux-utils
* patch
* bzip2
* perl-Data-Dumper
* perl-ExtUtils-MakeMaker
* efibootmgr
* mokutil

 a| 
* python3.12
* python3.12-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* python3
* python3-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* redhat-lsb-core
* python39
* python39-devel


|===
Il pacchetto di installazione di Mediator è un file tar compresso autoestraente che include:

* Un file RPM contenente tutte le dipendenze che non è possibile ottenere dal repository della release supportata.
* Uno script di installazione.


Si consiglia un certificato SSL valido.



=== Considerazioni sull'aggiornamento del sistema operativo e sulla compatibilità del kernel

* È possibile aggiornare tutti i pacchetti di librerie, ad eccezione del kernel, ma potrebbe essere necessario riavviare il sistema per applicare le modifiche in ONTAP Mediator.  Pianificare un periodo di inattività se è necessario riavviare.
* Dovresti mantenere aggiornato il kernel del sistema operativo.  Aggiorna il kernel core a una versione supportata elencata inlink:whats-new-concept.html#scst-support-matrix["Matrice della versione di ONTAP Mediator"] .  È necessario riavviare il sistema, quindi pianificare una finestra di manutenzione per l'interruzione.
+
** Disinstallare il modulo kernel SCST prima di riavviare, quindi reinstallarlo in seguito.
** Preparare una versione supportata di SCST da reinstallare prima di avviare l'aggiornamento del sistema operativo del kernel.




[NOTE]
====
* La versione del kernel deve corrispondere alla versione del sistema operativo.
* Non aggiornare il kernel oltre la versione del sistema operativo supportata per la versione di ONTAP Mediator in quanto il modulo SCST testato probabilmente non funzionerà.


====


== Installare ONTAP Mediator quando l'avvio protetto UEFI è attivato

ONTAP Mediator può essere installato su un sistema con o senza UEFI Secure Boot abilitato.

.A proposito di questa attività
È possibile scegliere di disattivare l'avvio protetto UEFI prima di installare ONTAP Mediator se non è necessario o se si stanno risolvendo i problemi di installazione di ONTAP Mediator. Disattivare l'opzione UEFI Secure Boot dalle impostazioni del computer.

[NOTE]
====
Per istruzioni dettagliate sulla disattivazione di UEFI Secure Boot, consultare la documentazione relativa al sistema operativo host.

====
Per installare ONTAP Mediator con UEFI Secure Boot abilitato, è necessario registrare una chiave di sicurezza prima che il servizio possa essere avviato. La chiave viene generata durante la fase di compilazione dell'installazione di SCST e salvata come coppia di chiavi private-public sul computer. Utilizzare l' `mokutil`utilità per aggiungere la chiave pubblica come chiave del proprietario della macchina (MOK) al firmware UEFI, consentendo al sistema di considerare attendibile e caricare il modulo firmato. Salvare la `mokutil` passphrase in un luogo sicuro, in quanto ciò è necessario quando si riavvia il sistema per attivare il MOK.

.Fasi
. [[STEP_1_uefi]]verificare se l'avvio protetto UEFI è attivato sul sistema:
+
`mokutil --sb-state`

+
I risultati indicano se l'avvio protetto UEFI è abilitato su questo sistema.

+
[cols="40,60"]
|===


| Se... | Vai a... 


 a| 
L'avvio protetto UEFI è attivato
 a| 




 a| 
L'avvio protetto UEFI è disattivato
 a| 
link:upgrade-host-os-mediator-task.html["Aggiornare il sistema operativo host e quindi ONTAP Mediator"]

|===
+
[NOTE]
====
** Viene richiesto di creare una passphrase che deve essere memorizzata in una posizione protetta. Questa passphrase è necessaria per attivare la chiave in UEFI Boot Manager.
** ONTAP Mediator 1.2.0 e le versioni precedenti non supportano questa modalità.


====
. [[step_2_uefi]]se l' `mokutil`utilità non è installata, eseguire il comando seguente:
+
`yum install mokutil`


