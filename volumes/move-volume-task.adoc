---
permalink: volumes/move-volume-task.html 
sidebar: sidebar 
keywords: move, volume 
summary: 'Sposta una FlexVol volume in un aggregato, nodo o entrambi diversi all"interno della stessa Storage Virtual Machine (SVM) per bilanciare la capacità dello storage.' 
---
= Spostare un volume ONTAP
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
È possibile spostare un volume FlexVol in un aggregato, nodo o entrambi diversi all'interno della stessa SVM (Storage Virtual Machine) per bilanciare la capacità dello storage dopo aver determinato lo squilibrio della capacità dello storage.

.A proposito di questa attività
Per impostazione predefinita, se l'operazione di cutover non viene completata entro 30 secondi, viene eseguita una riesecuzione. È possibile regolare il comportamento predefinito utilizzando i `-cutover-window` parametri e `-cutover-action`, che richiedono entrambi l'accesso avanzato a livello di privilegi.

Per eseguire questa attività, è necessario essere un amministratore del cluster.

.Prima di iniziare
* Se si sposta un volume che utilizza la compressione adattiva 8K su una delle seguenti piattaforme, è necessariolink:increase-volume-active-file-system-size.html["aumentare la dimensione del file system attivo del volume"] prima di spostare il volume.  Su queste piattaforme i dati vengono compressi in modo diverso, in modo da risparmiare spazio a livello aggregato anziché a livello di volume.  A causa di questa differenza, la dimensione del file system attivo del volume dovrebbe essere aumentata in base alla quantità di risparmio di compressione 8k per evitare che il volume esaurisca lo spazio durante lo spostamento.
+
** Piattaforme AFF e FAS che supportano l'efficienza di archiviazione del processore di offload dedicato
+
Scopri di più sulle piattaforme AFF e FAS che supportanolink:../concepts/builtin-storage-efficiency-concept.html["efficienza di archiviazione del processore di scarico dedicato"] .

** Piattaforme AFF serie C
+
Vedi illink:https://hwu.netapp.com/["Hardware Universe"^] per un elenco completo delle piattaforme della serie C.



* Se si sta spostando uno specchio di protezione dei dati e non è stata inizializzata la relazione specchio, utilizzare `snapmirror initialize` comando per inizializzare la relazione mirror. Scopri di più su  `snapmirror initialize` nel link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-initialize.html["Riferimento al comando ONTAP"^] .
+
Prima di poter spostare uno dei volumi, è necessario inizializzare le relazioni mirror di protezione dei dati.



.Fasi
. Determina un aggregato su cui puoi spostare il volume:
+
[source, cli]
----
volume move target-aggr show
----
+
L'aggregato selezionato deve disporre di spazio sufficiente per il volume, ovvero le dimensioni disponibili sono maggiori del volume che si sta spostando.

+
L'esempio seguente mostra che il volume vs2 può essere spostato in uno qualsiasi degli aggregati elencati:

+
[listing]
----
cluster1::> volume move target-aggr show -vserver vs2 -volume user_max
Aggregate Name   Available Size   Storage Type
--------------   --------------   ------------
aggr2            467.9GB          hdd
node12a_aggr3    10.34GB          hdd
node12a_aggr2    10.36GB          hdd
node12a_aggr1    10.36GB          hdd
node12a_aggr4    10.36GB          hdd
5 entries were displayed.
----
+
Ulteriori informazioni su `volume move target-aggr show` nella link:https://docs.netapp.com/us-en/ontap-cli/volume-move-target-aggr-show.html["Riferimento al comando ONTAP"^].

. Eseguire un controllo di convalida per verificare che il volume possa essere spostato nell'aggregato previsto:
+
[source, cli]
----
volume move start -perform-validation-only
----
+
Ulteriori informazioni su `volume move start` nella link:https://docs.netapp.com/us-en/ontap-cli/volume-move-start.html["Riferimento al comando ONTAP"^].

. Sposta il volume:
+
[source, cli]
----
volume move start
----
+
Il seguente comando sposta il volume user_max su vs2 SVM nell'aggregato node12a_aggr3. Lo spostamento viene eseguito come processo in background.

+
[listing]
----
cluster1::> volume move start -vserver vs2 -volume user_max
-destination-aggregate node12a_aggr3
----
. Determinare lo stato dell'operazione di spostamento del volume:
+
[source, cli]
----
volume move show
----
+
L'esempio seguente mostra lo stato di uno spostamento di un volume che ha completato la fase di replica e si trova nella fase di cutover:

+
[listing]
----

cluster1::> volume move show
Vserver   Volume     State    Move Phase  Percent-Complete Time-To-Complete
--------- ---------- -------- ----------  ---------------- ----------------
vs2       user_max   healthy  cutover     -                -
----
+
Lo spostamento del volume è completo quando non viene più visualizzato in `volume move show` output del comando.

+
Ulteriori informazioni su `volume move show` nella link:https://docs.netapp.com/us-en/ontap-cli/volume-move-show.html["Riferimento al comando ONTAP"^].

. Facoltativamente, visualizza i risparmi di compressione:
+
[source, cli]
----
volume show-footprint -vserver <SVM> -volume <volume_name>
----
+

NOTE: Ulteriori risparmi a livello aggregato potrebbero essere realizzati tramite una scansione di conversione post-processo che viene eseguita automaticamente e subito dopo il completamento dello spostamento del volume.



.Informazioni correlate
* link:recommendations-moving-concept.html["Considerazioni e consigli per lo spostamento dei volumi"]

